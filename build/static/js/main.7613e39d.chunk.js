(this["webpackJsonpnewsapp-frontend"]=this["webpackJsonpnewsapp-frontend"]||[]).push([[0],[,,,,,,,,,function(e,t){var n="fr-CA",a={year:"numeric",month:"2-digit",day:"2-digit"},c=new Intl.DateTimeFormat(n,a).format(Date.now()-6048e5),s=new Intl.DateTimeFormat(n,a).format(Date.now()),r={baseUrl:"https://nomoreparties.co/news/v2/everything",from:"from=".concat(c),to:"to=".concat(s),pageSize:"pageSize=100",apiKey:"apiKey=19099c172d26417a8c40212cb48a6045",headers:{"Content-Type":"application/x-www-form-urlencoded"}};e.exports={DELETECARD_ERR:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",CARDS_PER_ROW:3,LOADNEWS_ERR:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439",KEYWORD_ERR:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e",SAVEDNEWS_ERR:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439",NEWS_API_OPTIONS:r,BASE_URL:"https://api.newsapp.me",UNAUTHORIZED_ERR:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",BAD_REQUEST_ERR:"\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),r=n(28),o=n.n(r),i=n(10),l=(n(36),n(20)),u=n(3),d=n(4),j=n(2),b=(n(37),n(30)),h=function(e){var t=e.component,n=Object(b.a)(e,["component"]);return Object(a.jsx)(j.b,{children:function(){return n.isLoggedIn?Object(a.jsx)(t,Object(u.a)({},n)):Object(a.jsx)(j.a,{from:"/saved-news",to:"/"})}})};n(43);var m=function(e){var t=e.inputLabelClassName,n=e.formName,c=e.label,s=e.name,r=e.type,o=e.value,i=e.minLength,l=e.maxLength,u=e.required,d=e.inputFieldClassName,j=e.placeholder,b=e.disabled,h=e.isValid,m=e.errorMessage,p=e.onChange;return Object(a.jsxs)("label",{className:"input ".concat(t),htmlFor:"".concat(s,"_").concat(n),children:[c,Object(a.jsx)("input",{type:r,value:o,minLength:i,maxLength:l,required:u,id:"".concat(s,"_").concat(n),onChange:p,className:"input__field ".concat(d),placeholder:j,disabled:b}),Object(a.jsx)("span",{className:"input__error ".concat(s,"__input-error ").concat(!h&&"".concat(s,"__input-error_active")),id:"".concat(s,"-error"),children:m})]})};n(44);var p=function(e){var t=e.type,n=e.buttonClassName,c=e.children,s=e.onClick,r=e.disabled;return Object(a.jsx)("button",{type:t,className:"button ".concat(n),onClick:s,disabled:r,children:c})};n(45);var O=function(e){var t=e.isOpen,n=e.onSubmit,c=e.onClose,s=e.formName,r=e.onChangeForm,o=e.children,i=e.submitButtonText,l=(e.isFormValid,e.authError),u=e.disabled;return Object(a.jsxs)("div",{className:"popup popup_type_".concat(s," ").concat(t&&"popup_opened"),children:[Object(a.jsx)("div",{className:"popup__overlay",onClick:c}),Object(a.jsxs)("form",{className:"popup__form ".concat(s,"__form"),name:s,onSubmit:n,children:[Object(a.jsx)("button",{type:"reset",className:"popup__close-button",onClick:c}),Object(a.jsx)("fieldset",{className:"popup__input-container",disabled:u,children:o}),"tooltip"!==s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"popup__error",children:l}),Object(a.jsx)(p,{buttonClassName:"popup__submit",onClick:n,disabled:u,children:i})]}),Object(a.jsxs)("span",{className:"popup__subtitle",children:["tooltip"!==s&&"\u0438\u043b\u0438 ",Object(a.jsx)("span",{className:"popup__link",onClick:r,children:"login"!==s?"\u0412\u043e\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})]})},_=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(d.a)(s,2),o=r[0],i=r[1],l=Object(c.useState)(!1),u=Object(d.a)(l,2),j=u[0],b=u[1],h=Object(c.useCallback)((function(e){a(e.target.value),i(e.target.validationMessage),b(e.target.validity.valid)}),[]);return{value:n,setValue:a,errorMessage:o,setErrorMessage:i,isValid:j,setIsValid:b,onChange:h}};var f=function(e){var t=e.isOpen,n=e.onClose,c=e.disabled,s=e.onChangeForm,r=e.onLogin,o=(e.authError,_()),i=_();return Object(a.jsxs)(O,{formName:"login",isOpen:t,onClose:function(){o.setErrorMessage(""),o.setValue(""),i.setErrorMessage(""),i.setValue(""),o.setIsValid(!1),i.setIsValid(!1),n()},onChangeForm:s,isFormValid:o.isValid&&i.isValid,onSubmit:function(e){e.preventDefault(),r(o.value,i.value)},disabled:c,submitButtonText:"\u0412\u043e\u0439\u0442\u0438",children:[Object(a.jsx)("legend",{className:"popup__heading",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsx)(m,Object(u.a)(Object(u.a)({label:"Email",name:"email",formName:"log",type:"email",minLength:"6",maxLength:"30",required:!0,autoComplete:"email"},o),{},{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"})),Object(a.jsx)(m,Object(u.a)(Object(u.a)({label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",formName:"log",type:"password",minLength:"8",maxLength:"30",required:!0,autoComplete:"password"},i),{},{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}))]})};var g=function(e){var t=e.isOpen,n=e.onClose,c=e.disabled,s=e.onChangeForm,r=e.onRegister,o=_(),i=_(),l=_();return Object(a.jsxs)(O,{formName:"registration",isOpen:t,onClose:function(){i.setValue(""),n()},onChangeForm:s,onSubmit:function(e){e.preventDefault(),r(o.value,l.value,i.value)},disabled:c,submitButtonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",children:[Object(a.jsx)("legend",{className:"popup__heading",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(a.jsx)(m,Object(u.a)(Object(u.a)({label:"Email",name:"email",formName:"reg",minLength:"6",maxLength:"30",type:"email",required:!0,autoComplete:"email"},o),{},{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"})),Object(a.jsx)(m,Object(u.a)(Object(u.a)({label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",formName:"reg",minLength:"8",maxLength:"30",type:"password",required:!0,autoComplete:"password"},l),{},{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})),Object(a.jsx)(m,Object(u.a)(Object(u.a)({label:"\u0418\u043c\u044f",name:"name",formName:"reg",minLength:"2",maxLength:"30",type:"text",required:!0},i),{},{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"}))]})};n(46);var x=function(e){var t=e.isOpen,n=e.onClose;return Object(a.jsx)(O,{formName:"tooltip",isOpen:t,onClose:n,children:Object(a.jsx)("legend",{className:"popup__heading",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d!"})})};n(47),n(48),n(49);var v=function(e){var t=e.linkClassName,n=e.activeLinkClassName,c=e.path,s=e.children;return Object(a.jsx)(i.b,{className:"link ".concat(t),activeClassName:n,exact:!0,to:c,children:s})};n(50);var N=function(){return Object(a.jsx)("svg",{className:"signout-button",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMin slice ",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6L6 6L6 18H10V20H6C4.89543 20 4 19.1046 4 18V6C4 4.89543 4.89543 4 6 4H10V6ZM17.5856 13L13.2927 17.1339L14.707 18.4958L21.4141 12.0371L14.707 5.57837L13.2927 6.9402L17.5856 11.0741H8V13H17.5856Z",fill:"currentColor"})})},w=s.a.createContext();var C=function(e){var t=e.isLoggedIn,n=e.pathname,s=e.onClick,r=e.isMenuOpened,o=e.navigationClassName,i=e.onSignOut,l=Object(c.useContext)(w),u="nav__item ".concat("/"===n||r?"nav__item_white":"nav__item_dark"),d="".concat(u," nav__button ").concat(r?"nav__button_mobile":"");return Object(a.jsxs)("nav",{className:"nav__list ".concat(o),children:[Object(a.jsx)(v,{linkClassName:u,activeLinkClassName:"nav__item_active",path:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),t&&Object(a.jsx)(v,{linkClassName:u,activeLinkClassName:"nav__item_active",path:"/saved-news",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsxs)(p,{buttonClassName:d,isMenuOpened:r,onClick:t?i:s,children:[Object(a.jsx)("span",{className:"nav__button-text",children:t?l.name:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),t&&Object(a.jsx)(N,{})]})]})};n(51);var k=function(e){var t=e.pathname,n="header__logo ".concat("/"===t?"logo_white":"logo_dark");return Object(a.jsx)(v,{path:"/",linkClassName:"logo__link",children:Object(a.jsx)("h1",{className:n,children:"NewsExplorer"})})};n(52);var S=function(e){var t=e.onMenuClick,n=e.isMenuOpened,c=Object(j.h)().pathname,s="menu ".concat(n?"menu_opened":"menu_closed","\n    ").concat("/"===c?"menu_white":"menu_dark");return Object(a.jsx)("button",{className:s,onClick:t,children:Object(a.jsx)("span",{})})};var L=function(e){var t=e.isLoggedIn,n=e.onClick,s=e.onSignOut,r=Object(c.useState)(!1),o=Object(d.a)(r,2),i=o[0],l=o[1],u=Object(j.h)().pathname,b="header__section ".concat(i?"header_mobile":""),h=" ".concat(i?"header__nav_mobile nav__list_active":"");return Object(a.jsxs)("header",{className:b,children:[Object(a.jsx)(k,{isMenuOpened:i,pathname:u}),Object(a.jsx)(S,{isMenuOpened:i,onMenuClick:function(){return l(!i)},pathname:u}),Object(a.jsx)(C,{navigationClassName:h,isLoggedIn:t,onSignOut:s,pathname:u,onClick:n,isMenuOpened:i})]})};n(53);var E=function(e){var t=e.onSearch,n=e.isLoading,c=_();return Object(a.jsxs)("div",{className:"search",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{className:"search__header",children:"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432\xa0\u043c\u0438\u0440\u0435?"}),Object(a.jsx)("p",{className:"search__subtitle",children:"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432 \u0441\u0432\u043e\u0451\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435."})]}),Object(a.jsxs)("form",{className:"search__form",onSubmit:function(e){var n=c.value,a=c.setErrorMessage;e.preventDefault(),t(n,a)},noValidate:!0,children:[Object(a.jsx)(m,Object(u.a)(Object(u.a)({name:"search",type:"text"},c),{},{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",disabled:n,inputFieldClassName:"search__input-field",inputLabelClassName:"search__input"})),Object(a.jsx)(p,{type:"submit",buttonClassName:"search__button",children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]})]})};n(54);var y=function(e){return Object(a.jsxs)("section",{className:"about",children:[Object(a.jsx)("img",{className:"about__image",src:"https://bigpicture.ru/wp-content/uploads/2018/06/750608b3-1274-4fff-8766-8b0a8995ee43_850.jpg",alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u0430\u0432\u0442\u043e\u0440\u0430."}),Object(a.jsxs)("div",{className:"about__container",children:[Object(a.jsx)("h2",{className:"about__header",children:"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"}),Object(a.jsx)("p",{className:"about__text",children:"\u042d\u0442\u043e \u0431\u043b\u043e\u043a \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0417\u0434\u0435\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442, \u0447\u0435\u043c \u0432\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c, \u043a\u0430\u043a\u0438\u043c\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043c\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u043b\u0430\u0434\u0435\u0435\u0442\u0435."}),Object(a.jsx)("p",{className:"about__text",children:"\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0432 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435, \u0447\u0435\u043c\u0443 \u0432\u044b \u0442\u0443\u0442 \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0438 \u0447\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c.        "})]})]})};n(55),n(56),n(57);var R=function(e){var t=e.pathname,n=e.isSaved;return Object(a.jsxs)(a.Fragment,{children:["/"===t&&!n&&Object(a.jsx)("svg",{className:"bookmark-button-icon bookmark-button-icon_bookmark",width:"14",height:"19",viewBox:"0 0 14 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M6.38218 12.7137L1 16.9425V1L13 1V16.9425L7.61782 12.7137L7 12.2283L6.38218 12.7137Z",strokeWidth:"2"})}),"/"===t&&n&&Object(a.jsx)("svg",{className:"bookmark-button-icon bookmark-button-icon_saved",width:"14",height:"19",viewBox:"0 0 14 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H13C13.5523 0 14 0.447715 14 1V19L7 13.5L0 19V1Z"})}),"/"!==t&&Object(a.jsx)("svg",{className:"bookmark-button-icon bookmark-button-icon_del",width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0H6V2H0V4H18V2H12V0ZM2 6V17C2 18.1046 2.89543 19 4 19H14C15.1046 19 16 18.1046 16 17V6H14V17H4V6H2ZM6 6L6 15H8L8 6H6ZM10 6V15H12V6H10Z"})})]})},I=s.a.createContext();var A=function(e){var t=e.isLoggedIn,n=e.onCardClick,s=e.article,r=s.keyword,o=s.title,i=s.description,l=s.publishedAt,u=s.url,d=s.urlToImage,b=s.source,h=Object(c.useContext)(I).savedNews,m=Object(j.h)().pathname,p=t&&h.some((function(e){return e.publishedAt===s.publishedAt&&e.title===s.title})),O=new Date(l),_=O.toLocaleString("ru",{month:"long",day:"numeric"})+", "+O.getFullYear(),f=t?"".concat(p&&"\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445"):"\u0412\u043e\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u0438";return Object(a.jsxs)("li",{className:"card",children:["/saved-news"===m&&Object(a.jsx)("span",{className:"card__element card__keyword",children:r}),Object(a.jsx)("button",{type:"button",className:"card__element card__button",onClick:function(){n(s)},children:Object(a.jsx)(R,{pathname:m,isSaved:p})}),(!t||t&&p)&&Object(a.jsx)("span",{className:"card__element card__tooltip",children:f}),Object(a.jsx)("div",{className:"card__img-wrapper",children:Object(a.jsx)("img",{src:d,alt:o,className:"card__image"})}),Object(a.jsxs)("div",{className:"card__content",children:[Object(a.jsx)("span",{className:"card__date",children:_}),Object(a.jsx)("h2",{className:"card__title",children:o}),Object(a.jsx)("p",{className:"card__text",children:i}),Object(a.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"card__source",children:"/"===m?b.name:b})]})]})};var T=function(e){var t=e.isLoggedIn,n=e.onCardClick,c=e.newsToRender,s=e.savedNews;return Object(a.jsx)("section",{className:"news-card-list",children:Object(a.jsx)("ul",{className:"news-card-list__wrapper",children:c.map((function(e,c){return Object(a.jsx)(A,{article:e,isLoggedIn:t,savedNews:s,onCardClick:n},c)}))})})};n(58);var V=function(){return Object(a.jsx)("div",{className:"preloader__container",children:Object(a.jsxs)("div",{className:"preloader",children:[Object(a.jsx)("i",{className:"preloader__spinner"}),Object(a.jsx)("span",{className:"preloader__text",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."})]})})},M=n(9);n(59);var D=function(e){var t=e.isError,n=e.onCardClick,s=e.onSearch,r=e.onShowMore,o=e.currentRow,i=e.isLoading,l=e.isLoggedIn,u=e.isSearchOk,d=Object(c.useContext)(I),j=d.news,b=d.savedNews,h=j.slice(0,(o+1)*M.CARDS_PER_ROW);return Object(a.jsxs)("section",{className:"main",children:[Object(a.jsx)(E,{onSearch:s,isLoading:i}),i&&Object(a.jsx)(V,{}),u&&Object(a.jsx)("div",{className:"main__news-container",children:h.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"main__news-heading",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(a.jsx)(T,{newsToRender:h,isLoggedIn:l,savedNews:b,onCardClick:n,currentRow:o}),h.length!==j.length&&Object(a.jsx)(p,{buttonClassName:"main__show-more",onClick:r,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})]}):Object(a.jsxs)("div",{className:"main__not-found",children:[Object(a.jsx)("span",{className:"main__not-found-icon"}),Object(a.jsx)("h3",{className:"main__not-found-heading",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(a.jsx)("p",{className:"main__not-found-text",children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})]})}),t&&Object(a.jsx)("div",{className:"main__news-container",children:Object(a.jsxs)("div",{className:"main__not-found",children:[Object(a.jsx)("h3",{className:"main__not-found-heading",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(a.jsx)("p",{className:"main__not-found-text",children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})}),Object(a.jsx)(y,{})]})},F=function(e){return["\u0441\u0442\u0430\u0442\u044c\u044f","\u0441\u0442\u0430\u0442\u044c\u0438","\u0441\u0442\u0430\u0442\u0435\u0439"][(e.length,e.length%10>=2&&e.length%10<=4&&(e.length%100<10||e.length%100>=20)?1:2)]};n(60);var P=function(e){var t,n=e.isLoggedIn,s=Object(c.useContext)(w),r=Object(c.useContext)(I).savedNews,o=n?r.map((function(e){return e.keyword})):[],i=Object(l.a)(new Set(o)).map((function(e){var t={};return t.keyword=e,t.quantity=o.filter((function(t){return t===e})).length,t})).sort((function(e,t){return t.quantity-e.quantity})).map((function(e){return e.keyword})),u=i.length<=3?i.join(", "):"".concat(i.slice(0,3).join(", ")," \u0438 ").concat(i.slice(3).length,"-").concat((t=i,["\u043c\u0443","\u043c","\u0438"][t.slice(3).length%10===1&&t.slice(3).length%100!==11?0:t.slice(3).length%10>=2&&t.slice(3).length%10<=4&&(t.slice(3).length%100<10||t.slice(3).length%100>=20)?1:2])," ").concat(function(e){return["\u0434\u0440\u0443\u0433\u043e\u043c\u0443","\u0434\u0440\u0443\u0433\u0438\u043c"][e.slice(3).length%10===1&&e.slice(3).length%100!==11?0:1]}(i));return Object(a.jsxs)("div",{className:"saved-news-header",children:[Object(a.jsx)("p",{className:"saved-news-header__title",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsxs)("h2",{className:"saved-news-header__heading",children:[s.name,", \u0443 \u0432\u0430\u0441 ",r.length," \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 ",F(r)]}),Object(a.jsxs)("p",{className:"saved-news-header__keywords-list",children:["\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:\xa0",Object(a.jsx)("span",{className:"saved-news-header__keywords",children:u})]})]})};n(61);var H=function(e){var t=e.isLoggedIn,n=e.onCardClick,s=Object(c.useContext)(I).savedNews;return Object(a.jsxs)("div",{className:"saved-news",children:[Object(a.jsx)(P,{isLoggedIn:t}),Object(a.jsx)(T,{newsToRender:s,isLoggedIn:t,onCardClick:n})]})},B=n.p+"static/media/fb.60abc816.svg",W=n.p+"static/media/github.df660a36.svg";n(62);var q=function(e){return Object(a.jsxs)("footer",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__credits",children:"\xa9 2020 Supersite, Powered by News API"}),Object(a.jsxs)("ul",{className:"footer__list",children:[Object(a.jsx)("li",{children:Object(a.jsx)(v,{path:"/",linkClassName:"footer__link",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://praktikum.yandex.ru/",className:"footer__link",target:"_blank",rel:"noopener noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})})]}),Object(a.jsxs)("ul",{className:"footer__media",children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com/bambambarabam",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("img",{className:"footer__icon",src:W,alt:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0413\u0438\u0442\u0445\u0430\u0431."})})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://www.facebook.com/yandex.praktikum/",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("img",{className:"footer__icon",src:B,alt:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0424\u0435\u0439\u0441\u0431\u0443\u043a."})})})]})]})},U=M.NEWS_API_OPTIONS.baseUrl,Z=M.NEWS_API_OPTIONS.from,z=M.NEWS_API_OPTIONS.to,J=M.NEWS_API_OPTIONS.pageSize,K=M.NEWS_API_OPTIONS.apiKey,Y=M.NEWS_API_OPTIONS.headers;function G(e){return function(e,t){return fetch("".concat(U,"?q=").concat(e,"&").concat(Z,"&").concat(z,"&").concat(J,"&").concat(K),t).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}(e,{headers:Y})}var Q=n(17),X=n(18),$=n(21),ee=n(22),te=function(e){Object(X.a)(n,e);var t=Object($.a)(n);function n(e){var a;Object(Q.a)(this,n);for(var c=arguments.length,s=new Array(c>1?c-1:0),r=1;r<c;r++)s[r-1]=arguments[r];return(a=t.call.apply(t,[this].concat(s))).status=400,a.message=e,a}return n}(Object(ee.a)(Error)),ne=function(e){Object(X.a)(n,e);var t=Object($.a)(n);function n(e){var a;Object(Q.a)(this,n);for(var c=arguments.length,s=new Array(c>1?c-1:0),r=1;r<c;r++)s[r-1]=arguments[r];return(a=t.call.apply(t,[this].concat(s))).status=401,a.message=e,a}return n}(Object(ee.a)(Error)),ae=n(9),ce=ae.BASE_URL,se=ae.UNAUTHORIZED_ERR,re=ae.BAD_REQUEST_ERR,oe=function(e){return fetch("".concat(ce,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new ne(e.message)}))})).then((function(e){return e}))},ie=n(9),le=ie.SAVEDNEWS_ERR,ue=ie.KEYWORD_ERR,de=ie.LOADNEWS_ERR,je=ie.DELETECARD_ERR;var be=function(){var e=n(63),t=Object(j.g)(),s=Object(j.h)().pathname,r=Object(c.useState)(!1),o=Object(d.a)(r,2),i=o[0],b=o[1],m=Object(c.useState)(""),p=Object(d.a)(m,2),O=p[0],_=p[1],v=Object(c.useState)(!1),N=Object(d.a)(v,2),C=N[0],k=N[1],S=Object(c.useState)(!1),E=Object(d.a)(S,2),y=E[0],R=E[1],A=Object(c.useState)(!1),T=Object(d.a)(A,2),V=T[0],M=T[1],F=Object(c.useState)({}),P=Object(d.a)(F,2),B=P[0],W=P[1],U=Object(c.useState)(0),Z=Object(d.a)(U,2),z=Z[0],J=Z[1],K=Object(c.useState)(!1),Y=Object(d.a)(K,2),Q=Y[0],X=Y[1],$=Object(c.useState)(!1),ee=Object(d.a)($,2),ae=ee[0],ie=ee[1],be=Object(c.useState)([]),he=Object(d.a)(be,2),me=he[0],pe=he[1],Oe=Object(c.useState)(!1),_e=Object(d.a)(Oe,2),fe=_e[0],ge=_e[1],xe=Object(c.useState)([]),ve=Object(d.a)(xe,2),Ne=ve[0],we=ve[1],Ce=Object(c.useState)(!1),ke=Object(d.a)(Ce,2),Se=ke[0],Le=ke[1];function Ee(){fetch("".concat(ce,"/articles"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){return we(e.data)})).catch((function(e){return console.error({message:le})}))}function ye(){R(!1),M(!1),X(!1)}function Re(){M(!V),R(!y)}return Object(c.useEffect)((function(){!i&&"/saved-news"===s&&M(!0)}),[i,s]),Object(c.useEffect)((function(){var e=localStorage.getItem("jwt");e&&oe(e).then((function(e){b(!0),W(e),Ee()})).catch((function(e){return console.error(e)}))}),[]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("news"));e&&e.length&&(pe(e),ge(!0))}),[]),Object(c.useEffect)((function(){function e(e){"Escape"!==e.key&&"Esc"!==e.key||ye()}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[]),Object(a.jsx)(w.Provider,{value:B,children:Object(a.jsx)(I.Provider,{value:{news:me,savedNews:Ne},children:Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(L,{isLoggedIn:i,onClick:function(){M(!0)},onSignOut:function(){b(!1),localStorage.removeItem("jwt"),W({}),t.push("/")}}),Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:"/",children:Object(a.jsx)(D,{isLoggedIn:i,isLoading:ae,isError:C,onSearch:function(e,t){e?(ie(!0),ge(!1),pe([]),J(0),G(e).then((function(t){var n=t.articles.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{keyword:e})}));localStorage.setItem("news",JSON.stringify(n)),k(!1),ge(!0)})).catch((function(e){console.error({message:de}),k(!0)})).finally((function(){return ie(!1)}))):t({message:ue})},onCardClick:function(e){if(!i)return R(!0);var t=Ne.find((function(t){return t.publishedAt===e.publishedAt&&t.title===e.title}));t?function(e){(t=e._id,fetch("".concat(ce,"/articles/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})).then((function(){return we(Ne.filter((function(t){return t._id!==e._id})))})).catch((function(e){return console.error({message:je})}));var t}(t):function(e){var t=e.keyword,n=e.title,a=e.description,c=e.publishedAt,s=e.source,r=e.url,o=e.urlToImage;return fetch("".concat(ce,"/articles"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},credentials:"same-origin",body:JSON.stringify({keyword:t,title:n,description:a,publishedAt:c,source:s.name,url:r,urlToImage:o})}).then((function(e){return e.json()}))}(e).then((function(e){return we([e.data].concat(Object(l.a)(Ne)))})).catch((function(e){return console.error(e)}))},onShowMore:function(){J(z+1)},isSearchOk:fe,currentRow:z})}),Object(a.jsx)(h,{path:"/saved-news",component:H,isLoggedIn:i})]}),Object(a.jsx)(q,{}),Object(a.jsx)(g,{authError:O,isOpen:y,onClose:ye,onChangeForm:Re,onRegister:function(t,n,a){Le(!0),function(e,t,n){return fetch("".concat(ce,"/signup"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e.error?new te(e.error):new te(e.message)}))}))}(t,e(n),a).then((function(e){R(!1),X(!0)})).catch((function(e){return _(e.message)})).finally((function(){return Le(!1)}))}}),Object(a.jsx)(f,{authError:O,isOpen:V,onChangeForm:Re,onLogin:function(t,n){Le(!0),function(e,t){return fetch("".concat(ce,"/signin"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},credentials:"same-origin",body:JSON.stringify({email:e,password:t})}).then((function(e){if(400===e.status)throw new te({message:re});if(401===e.status)throw new ne({message:se});return e.json()})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e.token}))}(t,e(n)).then((function(e){oe(e).then((function(e){return W(e)})).catch((function(e){return _(e.message)})),b(!0),M(!1),Ee()})).catch((function(e){return _(e.message)})).finally((function(){return Le(!1)}))},onClose:ye,disabled:Se}),Object(a.jsx)(x,{isOpen:Q,onClose:ye,onChangeForm:function(){X(!1),M(!0)},disabled:Se})]})})})};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(be,{})})}),document.getElementById("root"))}],[[64,1,2]]]);
//# sourceMappingURL=main.7613e39d.chunk.js.map